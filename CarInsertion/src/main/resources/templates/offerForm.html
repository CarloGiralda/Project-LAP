<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Information Form</title>
    <style>
        body {
          font-family: Arial, sans-serif;
          margin: 40px;
          padding: 0px;
        }

        form {
          max-width: 400px;
          margin: 0 auto;
        }

        label {
          display: block;
          margin-bottom: 8px;
        }

        input {
          width: 100%;
          padding: 8px;
          margin-bottom: 16px;
          box-sizing: border-box;
        }

        button {
          background-color: #4CAF50;
          color: white;
          padding: 10px 15px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
        }

        button:hover {
          background-color: #45a049;
        }


        section {
            padding: 0px;
            margin-bottom: 40px;
        }

        #section1 {
            background-color: #008B8B;
            padding: 30px;
            margin-top: 20px;
            margin-right: 300px;
            margin-bottom: 0px;
            margin-left: -400px;
        }

        #section2 {
            background-color: #008B8B;
            padding: 30px;
            margin-top: -780px;
            margin-right: -300px;
            margin-bottom: 0px;
            margin-left: 300px;
        }

    </style>
    <script>
        function submitForm() {
            // Replace these URLs with the ones you want to use
            var postUrl = "http://localhost:8080/insertoffer";
            var successUrl = "http://localhost:8080/insertcar";
            var problemUrl = "http://localhost:8080/failed";

            // Get form data
            var from = document.getElementById("from").value;
            var to = document.getElementById("to").value;
            var price = document.getElementById("price").value;

            const params={
                          fromDate: from,
                          toDate: to,
                          pricePerDay: price
            };

            // Create a new XMLHttpRequest object
            var xhr = new XMLHttpRequest();

            // Set up the request
            xhr.open("POST", postUrl, true);

            xhr.setRequestHeader('Content-type', 'application/json')
            //xhr.setRequestHeader('Access-Control-Allow-Origin',"*")

            // Define what happens on successful data submission
            xhr.onload = function () {
                if (200 === 200) {
                    // Redirect to the success page
                    window.location.href = successUrl;
                }else{
                    window.location.href= problemUrl;
                }
            };

            // Send the form data
            xhr.send(JSON.stringify(params)); // Make sure to stringify
        }
    </script>
</head>
<body>

<h2>Offer Insertion Form</h2>

<form id="myForm" onsubmit="event.preventDefault(); submitForm();">

        <label for="from">From:</label>
        <input type="date" id="from" name="from" required />
        <br>

        <label for="to">To:</label>
        <input type="date" id="to" name="to" required />
        <br>

        <label for="price">Price Per Day (â‚¬):</label>
        <input type="text" id="price" name="price" placeholder="Enter amount in euros" required />
        <br>

        <button type="submit">NextPage</button>
</form>

</body>
</html>
